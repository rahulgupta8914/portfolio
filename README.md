# new set up and lots of optimizations